javascript:(function(){if(window.MCONSOLE){MCONSOLE.show();}else{window.MCONSOLE={};var $,$$,$$$;$$=function(e){return document.getElementById(e)};$$$={get:function(e,t){t||(t=document);return t.querySelector(e)},getAll:function(e,t){t||(t=document);return t.querySelectorAll(e)},on:function(e,t,n){e||(e=document);e.addEventListener(t,n,false)},setClass:function(e,t){e.setAttribute('class',t)},getClass:function(e){return e.getAttribute('class')},hasStyle:function(e,t){var n=$$$.getStyle(e);return n&&$$$.getStyle(e).match(t)},setStyle:function(e,t){e.setAttribute('style',t)},addStyle:function(e,t){if(!$$$.hasStyle(e,t)){e.setAttribute('style',$$$.getStyle(e)+t)}},getStyle:function(e){var t=e.getAttribute('style');if(!t)t='';return t},scrollTop:function(){window.scrollTo(0,0)}};MCONSOLE.logs=[];MCONSOLE.mconsole=null;MCONSOLE.mconsoleLog=null;MCONSOLE.mconsoleForm=null;MCONSOLE.mconsoleInput=null;MCONSOLE.mconsoleNew=null;MCONSOLE.mconsoleClose=null;MCONSOLE.userIsTyping=false;MCONSOLE.hasFixedPositioning=null;MCONSOLE.positionCSS=null;MCONSOLE.scrollTimeout=null;MCONSOLE.userClosed=false;MCONSOLE.sanitize=function(e){if(typeof e==undefined||typeof e!='object')return e;var t,n;t={};for(n in e){t[n]=e[n]+''}t=JSON.stringify(t,null,2);return t};MCONSOLE.init=function(){var e=document.createElement('style');if(true||navigator.userAgent.match(/iPhone|iPad|iPod/gi)){MCONSOLE.positionCSS='position:absolute;';MCONSOLE.hasFixedPositioning=false}else{MCONSOLE.positionCSS='position:fixed; bottom: 0;';MCONSOLE.hasFixedPositioning=true}e.innerHTML='#mconsole {-moz-box-sizing:border-box; -webkit-box-sizing: border-box;box-sizing:border-box; font-size: 10px; background: rgba(150,150,150,0.4); width: 100%;'+MCONSOLE.positionCSS+';left: 0;} #mconsole.show{left: 0;} #mconsole.hide{left: -1000px;} #mconsoleNew {z-index: 999999; position: relative; font-size: 200%; float: right; margin-right: 0.50em; display: block;} #mconsoleClose {margin-right: 0.25em; position: relative; z-index: 999999; font-size: 200%; float: right; display: block;} #mconsole pre {width: 100%; height: 2em; margin: 0; position: absolute; top: 0px;} #mconsole input {-webkit-appearance: none; z-index: 1000000; position: relative; background-color: rgba(0,0,0,0.6); color: #E6E6E6; -moz-box-sizing:border-box; -webkit-box-sizing: border-box;box-sizing:border-box; width: 100%; margin: 4em 0 0; border: 0; padding: 0;} #mconsole input::-webkit-input-placeholder { color: #E6E6E6; } #mconsole input:-moz-placeholder { color: #E6E6E6; }';MCONSOLE.mconsole=document.createElement('div');MCONSOLE.mconsole.id='mconsole';$$$.setClass(MCONSOLE.mconsole,'hide');MCONSOLE.mconsole.innerHTML='<a href="#" id="mconsoleClose">x</a><a href="#" id="mconsoleNew">+</a><pre id="mconsoleLog"></pre><form id="mconsoleForm"><input type="text" id="mconsoleInput" placeholder="console (type here...)"></form>';MCONSOLE.mconsole.appendChild(e);document.body.appendChild(MCONSOLE.mconsole);MCONSOLE.mconsole=$$('mconsole');MCONSOLE.mconsoleLog=$$('mconsoleLog');MCONSOLE.mconsoleForm=$$('mconsoleForm');MCONSOLE.mconsoleInput=$$('mconsoleInput');MCONSOLE.mconsoleNew=$$('mconsoleNew');MCONSOLE.mconsoleClose=$$('mconsoleClose');MCONSOLE.addListeners();MCONSOLE.updatePosition();MCONSOLE.show()};MCONSOLE.updatePosition=function(){var e=window.pageYOffset+window.innerHeight-MCONSOLE.mconsole.offsetHeight;if(!MCONSOLE.hasFixedPositioning){$$$.setStyle(MCONSOLE.mconsole,'top:'+e+'px;')}};MCONSOLE.addListeners=function(){$$$.on(MCONSOLE.mconsoleInput,'focus',function(e){MCONSOLE.userIsTyping=true});$$$.on(MCONSOLE.mconsoleInput,'blur',function(e){MCONSOLE.userIsTyping=false;MCONSOLE.updatePosition()});$$$.on(window,'scroll',function(e){if(!MCONSOLE.userIsTyping){MCONSOLE.scrollTimeout=setTimeout(MCONSOLE.show,50)}});$$$.on(MCONSOLE.mconsoleForm,'submit',function(e){e.preventDefault();try{var t=eval(MCONSOLE.mconsoleInput.value);console.log(MCONSOLE.mconsoleInput.value+' = '+MCONSOLE.sanitize(t))}catch(n){console.log(MCONSOLE.mconsoleInput.value+' = '+n.text)}MCONSOLE.mconsoleInput.value=''});$$$.on(MCONSOLE.mconsoleNew,'click',function(e){e.preventDefault();MCONSOLE.newWindow()});$$$.on(MCONSOLE.mconsoleClose,'click',function(e){e.preventDefault();MCONSOLE.hide(true)})};MCONSOLE.otherWindow=null;MCONSOLE.newWindow=function(){MCONSOLE.otherWindow=window.open();if(MCONSOLE.otherWindow){setTimeout(function(){MCONSOLE.otherWindow.document.write('<!doctype html><html><head><title>mobile-console</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><style>body {font-width: 18px;}</style></head><body><h1>mobile-console</h1><pre>'+MCONSOLE.mconsoleLog.innerHTML+'</pre></body></html>');MCONSOLE.otherWindow.document.close()},500)}};MCONSOLE.show=function(){if(!MCONSOLE.userClosed){MCONSOLE.updatePosition();$$$.setClass(MCONSOLE.mconsole,'show')}};MCONSOLE.hide=function(e){$$$.setClass(MCONSOLE.mconsole,'hide');if(e){MCONSOLE.userClosed=true}};MCONSOLE.addLog=function(e){MCONSOLE.logs.push(e);MCONSOLE.mconsoleLog.innerHTML=e+'<br>'+MCONSOLE.mconsoleLog.innerHTML};console.log=function(e){var t,n,r,i;r=MCONSOLE.sanitize(e);MCONSOLE.addLog(r);t=new XMLHttpRequest();n="//davidbcalhoun.com/console/post.php";i="log="+Date.now()+' '+escape(r);t.open("POST",n,true);t.setRequestHeader("Content-type","application/x-www-form-urlencoded");t.send(i)};MCONSOLE.init()}})();
